var http=function(){var n={};return n.sendRequest=function(n,t,i,r=null,u=null){var f=new XMLHttpRequest;f.open(n,t);f.onreadystatechange=function(){f.readyState===4?f.status===200&&(f.responseText?r(JSON.parse(f.responseText)):r(null)):u&&u(f.status)};n=="POST"&&f.setRequestHeader("Content-Type","application/json; charset=UTF-8");f.send(JSON.stringify(i))},n.get=function(t,i=null,r=null){n.sendRequest("GET",t,null,i,r)},n.post=function(t,i,r=null,u=null){n.sendRequest("POST",t,i,r,u)},n}(),TodoService=function(){var n={},i=null,t=!0,u=function(t){http.post("http://localhost:5001/api/todo/add/",{Message:t},function(){n.get()})},r=function(n){for(var i,f=document.getElementById("todolist"),u="",r=0;r<n.length;r++)(i=n[r],t||!i.finished)&&(u+=`<tr>
                    <td>
                        <div class="ui checkbox">
                            <input type="checkbox" ${i.finished?"checked":""} onclick="TodoService.toggle('${i.key}');"/>
                            <label>${i.text}</label>
                        </div>
                    </td >
                    <td class="right aligned">
                        <a onclick="TodoService.remove('${i.key}');" >
                            <i class="red remove icon"></i>
                        </a>
                    </td>
                </tr>`);f.innerHTML=u};return n.tryAdd=function(){var n=document.getElementById("taskText");n.value&&(u(n.value),n.value="")},n.remove=function(t){http.post("http://localhost:5001/api/todo/remove/",{Key:t},function(){n.get()})},n.toggle=function(t){http.get("http://localhost:5001/api/todo/task/"+t+"/toggle",function(){n.get()})},n.get=function(){http.get("http://localhost:5001/api/todo/tasks",function(n){i=n.tasks;r(i)})},n.toggleTaskVisibility=function(){t=!t;var n=document.getElementById("taskButton");n.innerText=t?"Hide finished tasks":"Show finished tasks";r(i)},n}();window.onload=function(){TodoService.get();TodoService.toggleTaskVisibility()};